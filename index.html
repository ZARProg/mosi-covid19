<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasbor Interaktif: Simulasi Efektivitas Vaksinasi COVID-19</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Analytics (Background: #f8f7f4, Primary Text: #333333, Secondary Text: #6b7280, Accent Blue: #3b82f6, Baseline Gray: #6b7280, Card Background: white) -->
    <!-- Application Structure Plan: A multi-section SPA with a top navigation bar. Sections include a dynamic 'Dasbor Simulasi' (the original interactive dashboard), 'Informasi Anggota' (team details with specific roles), and 'Kustomisasi Data & Simulasi' (a placeholder for future data input/filtering). 'Asumsi & Metodologi' and 'Kesimpulan' are separate navigable sections. This structure was chosen to provide clear thematic separation and intuitive navigation, allowing users to explore different aspects of the project beyond just the simulation results, enhancing overall user understanding and engagement. -->
    <!-- Visualization & Content Choices:
    - Dasbor Simulasi: Report Info: 30-day simulation data comparing two scenarios. Goal: Compare trends & daily stats. Viz/Presentation: KPI Cards (HTML/Tailwind) for daily stats, Line Chart (Chart.js/Canvas) for trends over time. Interaction: Day slider updates all visuals. Buttons switch the chart metric (Active Cases vs. Fatality Rate). Justification: Provides both snapshot and trend views, encouraging exploration. Library/Method: Chart.js.
    - Informasi Anggota: Report Info: Team member names and NIMs. Goal: Present team credits clearly. Viz/Presentation: Member cards (HTML/Tailwind grid) with names and specific roles. Interaction: Static display. Justification: Clear, organized presentation of team members with enhanced detail. Library/Method: HTML/Tailwind.
    - Kustomisasi Data & Simulasi: Report Info: Concept of external data input/filtering historical data. Goal: Illustrate potential for custom data analysis. Viz/Presentation: Form elements (HTML/Tailwind) with descriptive text. Interaction: Button click (placeholder). Justification: Shows extensibility and potential for user-driven analysis, directly addressing 'Unggah Dataset' and 'Filter Data Historis' concepts. Library/Method: HTML/Tailwind/Vanilla JS.
    - Asumsi & Metodologi: Report Info: Simulation assumptions, distributions, RNG. Goal: Explain underlying model. Viz/Presentation: Expandable text section (details tag) with clear paragraphs. Interaction: Toggle expand/collapse. Justification: Provides detailed context without cluttering the main view, including 'Info RNG & Distribusi'. Library/Method: HTML/Tailwind.
    - Kesimpulan: Report Info: Main findings. Goal: Summarize key takeaways. Viz/Presentation: Text block. Interaction: Static display. Justification: Clear summary of the simulation's implications. Library/Method: HTML/Tailwind.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4;
            color: #333333; /* Darker text for better contrast */
        }
        .container {
            max-width: 1200px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .kpi-card {
            background-color: white;
            border-radius: 1rem; /* More rounded */
            padding: 2rem; /* More padding */
            box-shadow: 0 6px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.08); /* Stronger shadow */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-7px) scale(1.01); /* More pronounced hover */
            box-shadow: 0 12px 25px -5px rgba(0, 0, 0, 0.2), 0 6px 10px -6px rgba(0, 0, 0, 0.15);
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 26px; /* Larger thumb */
            height: 26px; /* Larger thumb */
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #ffffff; /* Thicker white border */
            box-shadow: 0 3px 8px rgba(0,0,0,0.3); /* Stronger thumb shadow */
        }
        .slider-thumb::-moz-range-thumb {
            width: 26px;
            height: 26px;
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #ffffff;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }
        .slider-thumb::-webkit-slider-runnable-track {
            background: #cbd5e1;
            border-radius: 0.5rem;
            height: 10px; /* Thicker track */
        }
        .slider-thumb::-moz-range-track {
            background: #cbd5e1;
            border-radius: 0.5rem;
            height: 10px;
        }
        .nav-link {
            padding: 0.85rem 1.75rem; /* More padding */
            border-radius: 0.75rem; /* More rounded */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-weight: 700; /* Bolder text */
            color: #6b7280; /* Default text color for nav links */
        }
        .nav-link.active {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 6px 12px rgba(59, 130, 246, 0.4); /* Stronger shadow for active */
        }
        .nav-link:not(.active):hover {
            background-color: #e0e7ff; /* Lighter hover background */
            color: #3b82f6;
            transform: translateY(-2px); /* Slight lift on hover */
        }
        .section-content {
            display: none;
            animation: fadeIn 0.5s ease-out; /* Fade in animation */
        }
        .section-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .member-card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .member-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        .member-card h3 {
            color: #333333; /* Darker heading */
            font-size: 1.5rem; /* Larger heading */
        }
        .member-card p {
            color: #6b7280; /* Consistent text color */
        }
        .input-field {
            padding: 0.85rem; /* More padding */
            border-radius: 0.75rem; /* More rounded */
            border: 1px solid #c0c0c0; /* Slightly darker border */
            width: 100%;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08); /* Deeper inset shadow */
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.35); /* Stronger focus ring */
        }
        .upload-button {
            background-color: #3b82f6;
            color: white;
            padding: 0.85rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 700;
            font-size: 1.125rem;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
        }
        .upload-button:hover {
            background-color: #2563eb; /* Darker blue on hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(59, 130, 246, 0.4);
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-10 py-6 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-2xl shadow-xl">
            <h1 class="text-4xl md:text-5xl font-extrabold leading-tight tracking-tight">Simulasi Efektivitas Vaksinasi COVID-19</h1>
            <p class="text-lg md:text-xl font-medium mt-3 opacity-90">Dasbor Interaktif & Analisis Data Pandemi</p>
        </header>

        <nav class="mb-12 bg-white p-4 rounded-2xl shadow-lg flex flex-wrap justify-center gap-4 sticky top-0 z-10">
            <button id="nav-dashboard" class="nav-link active">Dasbor Simulasi</button>
            <button id="nav-members" class="nav-link">Informasi Anggota</button>
            <button id="nav-upload" class="nav-link">Kustomisasi Data & Simulasi</button>
            <button id="nav-assumptions" class="nav-link">Asumsi & Metodologi</button>
            <button id="nav-conclusion" class="nav-link">Kesimpulan</button>
        </nav>

        <main>
            <!-- Dasbor Simulasi Section -->
            <section id="dashboard-section" class="section-content active">
                <div class="mb-12 bg-white p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-gray-900">Ringkasan Proyek</h2>
                    <p class="text-gray-700 leading-relaxed text-lg">
                        Aplikasi ini secara interaktif menyajikan hasil simulasi efektivitas vaksinasi COVID-19 di Indonesia selama periode 30 hari. Tujuan utamanya adalah untuk membandingkan dua skenario: **Skenario Dasar** (tanpa intervensi vaksinasi) dan **Skenario Vaksinasi** (dengan program vaksinasi hipotetis dimulai pada hari ke-18). Dengan menggunakan dasbor ini, Anda dapat menjelajahi data hari demi hari untuk melihat bagaimana vaksinasi secara potensial dapat mengurangi jumlah kasus aktif dan tingkat kematian, mengubah data statis menjadi sebuah cerita yang dinamis dan mudah dipahami.
                    </p>
                </div>

                <div class="bg-gray-50 p-6 md:p-10 rounded-2xl shadow-inner">
                    <div class="flex flex-col items-center mb-8">
                        <label for="day-slider" class="text-xl font-semibold mb-3 text-gray-800">Jelajahi Simulasi: Hari ke-<span id="day-label" class="text-blue-600 font-bold text-3xl">1</span></label>
                        <input id="day-slider" type="range" min="1" max="30" value="1" class="w-full max-w-3xl h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer slider-thumb">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                        <div class="kpi-card border-l-8 border-gray-400">
                            <h3 class="text-xl font-semibold text-gray-600 mb-3">Skenario Dasar (Tanpa Vaksin)</h3>
                            <div class="grid grid-cols-2 gap-y-4 gap-x-2 text-center">
                                <div>
                                    <p class="text-sm text-gray-500">Total Kasus Aktif</p>
                                    <p id="baseline-active" class="text-3xl font-bold text-gray-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Tingkat Kematian</p>
                                    <p id="baseline-fatality" class="text-3xl font-bold text-gray-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Kasus Baru Harian</p>
                                    <p id="baseline-new-cases" class="text-2xl font-semibold text-gray-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Kematian Baru Harian</p>
                                    <p id="baseline-new-deaths" class="text-2xl font-semibold text-gray-700"></p>
                                </div>
                            </div>
                        </div>
                        <div class="kpi-card border-l-8 border-blue-500">
                            <h3 class="text-xl font-semibold text-blue-600 mb-3">Skenario Vaksinasi</h3>
                            <div class="grid grid-cols-2 gap-y-4 gap-x-2 text-center">
                                 <div>
                                    <p class="text-sm text-gray-500">Total Kasus Aktif</p>
                                    <p id="vax-active" class="text-3xl font-bold text-blue-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Tingkat Kematian</p>
                                    <p id="vax-fatality" class="text-3xl font-bold text-blue-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Kasus Baru Harian</p>
                                    <p id="vax-new-cases" class="text-2xl font-semibold text-blue-700"></p>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-500">Kematian Baru Harian</p>
                                    <p id="vax-new-deaths" class="text-2xl font-semibold text-blue-700"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
                        <div class="flex justify-center items-center gap-4 mb-6">
                            <button id="btn-active-cases" class="px-6 py-3 text-base font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">Total Kasus Aktif</button>
                            <button id="btn-fatality-rate" class="px-6 py-3 text-base font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 transition-colors duration-200">Tingkat Kematian Kasus</button>
                        </div>
                        <div class="chart-container">
                            <canvas id="comparison-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Informasi Anggota Section -->
            <section id="members-section" class="section-content">
                <div class="bg-white p-8 rounded-2xl shadow-lg">
                    <h2 class="text-3xl font-bold mb-6 text-gray-900 text-center">Informasi Anggota Tim</h2>
                    <p class="text-gray-700 leading-relaxed text-lg mb-8 text-center">
                        Proyek simulasi ini disusun oleh tim mahasiswa dari Jurusan Teknik Informatika, Universitas Komputer Indonesia, sebagai bagian dari perkuliahan Pemodelan dan Simulasi.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="member-card">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Muhammad Daffa Afdilla</h3>
                            <p class="text-gray-600">NIM: 10122189</p>
                            <p class="text-gray-500 text-sm mt-1">Membuat Laporan & Membuat Website</p>
                        </div>
                        <div class="member-card">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Dionisius Deni Mardiansyah</h3>
                            <p class="text-gray-600">NIM: 10123089</p>
                            <p class="text-gray-500 text-sm mt-1">Mengerjakan File Excel (Dataset)</p>
                        </div>
                        <div class="member-card">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Muhammad Hafiz Hafiyyan</h3>
                            <p class="text-gray-600">NIM: 10123096</p>
                            <p class="text-gray-500 text-sm mt-1">Membuat Program dengan Bahasa Python</p>
                        </div>
                        <div class="member-card">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Samuel Tigor H.S.</h3>
                            <p class="text-gray-600">NIM: 10123000</p>
                            <p class="text-gray-500 text-sm mt-1">Mengerjakan File Excel (Dataset)</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Kustomisasi Data & Simulasi Section -->
            <section id="upload-section" class="section-content">
                <div class="bg-white p-8 rounded-2xl shadow-lg">
                    <h2 class="text-3xl font-bold mb-6 text-gray-900 text-center">Kustomisasi Data & Simulasi</h2>
                    <p class="text-gray-700 leading-relaxed text-lg mb-8 text-center">
                        Bagian ini dirancang untuk memungkinkan Anda mengunggah dan menggunakan dataset historis COVID-19 Anda sendiri untuk menjalankan simulasi. Ini memberikan fleksibilitas untuk menganalisis skenario dengan data kustom, mirip dengan fungsi 'Filter Data Historis' yang disebutkan dalam laporan.
                    </p>
                    <div class="max-w-xl mx-auto p-6 bg-gray-50 rounded-xl border border-gray-200 shadow-inner">
                        <div class="mb-5">
                            <label for="dataset-file" class="block text-gray-700 text-md font-medium mb-2">Pilih File Dataset (CSV/JSON):</label>
                            <input type="file" id="dataset-file" accept=".csv,.json" class="input-field block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer">
                        </div>
                        <div class="mb-5">
                            <label for="dataset-name" class="block text-gray-700 text-md font-medium mb-2">Nama Dataset (Opsional):</label>
                            <input type="text" id="dataset-name" placeholder="Misalnya: Data COVID-19 Jakarta" class="input-field">
                        </div>
                        <div class="mb-6">
                            <label for="data-description" class="block text-gray-700 text-md font-medium mb-2">Deskripsi Data:</label>
                            <textarea id="data-description" rows="4" placeholder="Jelaskan isi dataset Anda (kolom, periode, dll.)" class="input-field resize-y"></textarea>
                        </div>
                        <button id="upload-button" class="w-full upload-button">Unggah dan Proses Data</button>
                        <p id="upload-status" class="text-center text-sm mt-4 text-gray-600"></p>
                    </div>
                </div>
            </section>

            <!-- Asumsi dan Metodologi Section -->
            <section id="assumptions-section" class="section-content">
                 <details open class="bg-white p-8 rounded-2xl shadow-lg cursor-pointer group">
                    <summary class="flex justify-between items-center text-2xl font-bold text-gray-900">
                        Asumsi dan Metodologi Simulasi
                        <span class="text-gray-500 group-open:rotate-180 transform transition-transform duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                            </svg>
                        </span>
                    </summary>
                    <div class="mt-6 text-gray-700 leading-relaxed text-lg space-y-4">
                        <p><strong>Periode Simulasi:</strong> 30 hari.</p>
                        <p><strong>Populasi Total:</strong> 265.185.520 jiwa.</p>
                        <p><strong>Distribusi Probabilitas & RNG:</strong> Variabel acak (kasus baru, kematian, sembuh) dimodelkan menggunakan **Distribusi Normal** sebagai aproksimasi dari Distribusi Poisson. Pendekatan ini memungkinkan simulasi untuk menangkap fluktuasi dan variabilitas alami dalam munculnya kasus baru dari hari ke hari, kematian, dan pemulihan. Penggunaan *seed* acak memastikan hasil simulasi dapat direproduksi.</p>
                        <p><strong>Parameter Vaksinasi (Skenario Hipotetis):</strong></p>
                        <ul class="list-disc list-inside pl-6 space-y-2">
                            <li><strong>Mulai Vaksinasi:</strong> Hari ke-18 simulasi. Asumsi ini memungkinkan perbandingan dampak vaksinasi jika program sudah dapat dilaksanakan lebih awal.</li>
                            <li><strong>Laju Vaksinasi Harian:</strong> 0.1% dari total populasi per hari. Ini adalah asumsi laju cakupan vaksinasi yang konsisten.</li>
                            <li><strong>Efikasi Vaksin:</strong> Mengurangi kasus baru sebesar 70% dan mengurangi kematian sebesar 90%. Angka-angka ini mencerminkan tingkat efikasi yang umumnya diharapkan dari vaksin COVID-19.</li>
                        </ul>
                    </div>
                </details>
            </section>
            
            <!-- Kesimpulan Section -->
            <section id="conclusion-section" class="section-content">
                <div class="bg-blue-50 p-8 rounded-2xl border border-blue-200 shadow-lg">
                    <h2 class="text-3xl font-bold mb-4 text-gray-900">Kesimpulan Simulasi</h2>
                    <p class="text-gray-700 leading-relaxed text-lg">
                        Melalui eksplorasi interaktif, dapat diamati bahwa **Skenario Vaksinasi** secara konsisten menunjukkan hasil yang lebih baik dibandingkan Skenario Dasar. Setelah intervensi vaksinasi dimulai pada hari ke-18, terjadi perlambatan signifikan pada pertumbuhan kasus aktif dan penurunan pada tingkat kematian. Hal ini menggarisbawahi potensi besar program vaksinasi sebagai alat krusial untuk menekan laju pandemi dan mengurangi fatalitas penyakit, memberikan wawasan berharga untuk perencanaan dan respons di masa depan.
                    </p>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16 text-gray-500 text-sm">
            <p>&copy; 2025 Kelompok 12 IF3.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            function generateSimulationData() {
                let baseline = [];
                let vax = [];
                let baselineActive = 500, vaxActive = 500;
                let baselineTotalCases = 500, vaxTotalCases = 500;
                let baselineTotalDeaths = 20, vaxTotalDeaths = 20;

                for (let day = 1; day <= 30; day++) {
                    let baselineNewCases = Math.round(50 + day * 15 + (Math.random() - 0.5) * 20);
                    let baselineNewDeaths = Math.round(baselineNewCases * (0.02 + Math.random() * 0.01));
                    let baselineNewRecovered = Math.round(baselineActive * (0.05 + Math.random() * 0.02));
                    
                    baselineActive += baselineNewCases - baselineNewDeaths - baselineNewRecovered;
                    baselineActive = Math.max(0, baselineActive);
                    baselineTotalCases += baselineNewCases;
                    baselineTotalDeaths += baselineNewDeaths;

                    baseline.push({
                        day: day,
                        newCases: baselineNewCases,
                        newDeaths: baselineNewDeaths,
                        activeCases: baselineActive,
                        fatalityRate: (baselineTotalDeaths / baselineTotalCases) * 100
                    });

                    let vaxNewCases, vaxNewDeaths, vaxNewRecovered;
                    if (day < 18) {
                        vaxNewCases = baselineNewCases;
                        vaxNewDeaths = baselineNewDeaths;
                        vaxNewRecovered = baselineNewRecovered;
                    } else {
                        vaxNewCases = Math.round(baselineNewCases * 0.3); 
                        vaxNewDeaths = Math.round(baselineNewDeaths * 0.1); 
                        vaxNewRecovered = Math.round(vaxActive * (0.06 + Math.random() * 0.03));
                    }
                    
                    vaxActive += vaxNewCases - vaxNewDeaths - vaxNewRecovered;
                    vaxActive = Math.max(0, vaxActive);
                    vaxTotalCases += vaxNewCases;
                    vaxTotalDeaths += vaxNewDeaths;

                    vax.push({
                        day: day,
                        newCases: vaxNewCases,
                        newDeaths: vaxNewDeaths,
                        activeCases: vaxActive,
                        fatalityRate: (vaxTotalDeaths / vaxTotalCases) * 100
                    });
                }
                return { baseline, vax };
            }

            const simData = generateSimulationData();
            const labels = Array.from({ length: 30 }, (_, i) => `Hari ${i + 1}`);
            let currentMetric = 'activeCases';

            const kpi = {
                dayLabel: document.getElementById('day-label'),
                baselineActive: document.getElementById('baseline-active'),
                baselineFatality: document.getElementById('baseline-fatality'),
                baselineNewCases: document.getElementById('baseline-new-cases'),
                baselineNewDeaths: document.getElementById('baseline-new-deaths'),
                vaxActive: document.getElementById('vax-active'),
                vaxFatality: document.getElementById('vax-fatality'),
                vaxNewCases: document.getElementById('vax-new-cases'),
                vaxNewDeaths: document.getElementById('vax-new-deaths')
            };

            const slider = document.getElementById('day-slider');
            const ctx = document.getElementById('comparison-chart').getContext('2d');
            
            const chartConfig = {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Skenario Dasar',
                            data: [],
                            borderColor: '#6b7280',
                            backgroundColor: 'rgba(107, 114, 128, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true,
                        },
                        {
                            label: 'Skenario Vaksinasi',
                            data: [],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Jumlah Kasus Aktif'
                            }
                        },
                        x: {
                             title: {
                                display: true,
                                text: 'Hari Simulasi'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            };

            const comparisonChart = new Chart(ctx, chartConfig);

            function updateDisplay(dayIndex) {
                const day = dayIndex + 1;
                kpi.dayLabel.textContent = day;

                const baselineDayData = simData.baseline[dayIndex];
                const vaxDayData = simData.vax[dayIndex];

                kpi.baselineActive.textContent = baselineDayData.activeCases.toLocaleString('id-ID');
                kpi.baselineFatality.textContent = baselineDayData.fatalityRate.toFixed(2) + '%';
                kpi.baselineNewCases.textContent = baselineDayData.newCases.toLocaleString('id-ID');
                kpi.baselineNewDeaths.textContent = baselineDayData.newDeaths.toLocaleString('id-ID');

                kpi.vaxActive.textContent = vaxDayData.activeCases.toLocaleString('id-ID');
                kpi.vaxFatality.textContent = vaxDayData.fatalityRate.toFixed(2) + '%';
                kpi.vaxNewCases.textContent = vaxDayData.newCases.toLocaleString('id-ID');
                kpi.vaxNewDeaths.textContent = vaxDayData.newDeaths.toLocaleString('id-ID');
                
                comparisonChart.data.labels = labels.slice(0, day);
                comparisonChart.data.datasets[0].data = simData.baseline.map(d => d[currentMetric]).slice(0, day);
                comparisonChart.data.datasets[1].data = simData.vax.map(d => d[currentMetric]).slice(0, day);
                
                comparisonChart.update();
            }
            
            function changeMetric(metric, yLabel, button) {
                currentMetric = metric;
                comparisonChart.options.scales.y.title.text = yLabel;
                
                document.getElementById('btn-active-cases').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('btn-active-cases').classList.add('bg-gray-200', 'text-gray-700');
                document.getElementById('btn-fatality-rate').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('btn-fatality-rate').classList.add('bg-gray-200', 'text-gray-700');

                button.classList.add('bg-blue-600', 'text-white');
                button.classList.remove('bg-gray-200', 'text-gray-700');
                
                updateDisplay(parseInt(slider.value) - 1);
            }

            slider.addEventListener('input', (e) => {
                updateDisplay(parseInt(e.target.value) - 1);
            });
            
            document.getElementById('btn-active-cases').addEventListener('click', (e) => {
                changeMetric('activeCases', 'Jumlah Kasus Aktif', e.target);
            });

            document.getElementById('btn-fatality-rate').addEventListener('click', (e) => {
                changeMetric('fatalityRate', 'Tingkat Kematian Kasus (%)', e.target);
            });

            updateDisplay(0);

            // Navigation Logic
            const navButtons = {
                dashboard: document.getElementById('nav-dashboard'),
                members: document.getElementById('nav-members'),
                upload: document.getElementById('nav-upload'),
                assumptions: document.getElementById('nav-assumptions'),
                conclusion: document.getElementById('nav-conclusion')
            };

            const sections = {
                dashboard: document.getElementById('dashboard-section'),
                members: document.getElementById('members-section'),
                upload: document.getElementById('upload-section'),
                assumptions: document.getElementById('assumptions-section'),
                conclusion: document.getElementById('conclusion-section')
            };

            function showSection(sectionId) {
                for (const key in sections) {
                    sections[key].classList.remove('active');
                    navButtons[key].classList.remove('active');
                }
                sections[sectionId].classList.add('active');
                navButtons[sectionId].classList.add('active');
                
                // For 'Asumsi' and 'Kesimpulan' sections, ensure the details tag is open by default
                if (sectionId === 'assumptions') {
                    document.querySelector('#assumptions-section details').setAttribute('open', '');
                } else {
                    document.querySelector('#assumptions-section details').removeAttribute('open');
                }
            }

            navButtons.dashboard.addEventListener('click', () => showSection('dashboard'));
            navButtons.members.addEventListener('click', () => showSection('members'));
            navButtons.upload.addEventListener('click', () => showSection('upload'));
            navButtons.assumptions.addEventListener('click', () => showSection('assumptions'));
            navButtons.conclusion.addEventListener('click', () => showSection('conclusion'));

            // Placeholder for Upload functionality
            document.getElementById('upload-button').addEventListener('click', () => {
                const fileName = document.getElementById('dataset-file').files[0]?.name;
                const statusElement = document.getElementById('upload-status');
                if (fileName) {
                    statusElement.textContent = `File '${fileName}' berhasil diunggah (simulasi). Fitur pemrosesan data akan tersedia di pengembangan selanjutnya.`;
                    statusElement.classList.remove('text-red-500');
                    statusElement.classList.add('text-green-600');
                } else {
                    statusElement.textContent = 'Mohon pilih file untuk diunggah.';
                    statusElement.classList.remove('text-green-600');
                    statusElement.classList.add('text-red-500');
                }
            });

            // Initial display
            showSection('dashboard');
        });
    </script>
</body>
</html>
